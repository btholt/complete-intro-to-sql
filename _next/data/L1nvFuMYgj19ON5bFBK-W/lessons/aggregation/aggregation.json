{"pageProps":{"post":{"attributes":{"description":""},"html":"<p>Occasionally you need to query for macro statistics about your tables, not just query for individual rows.</p>\n<p>Let&#39;s use that we&#39;ve already used before, <code>COUNT</code>. What if we want to know how many ingredients we have overall in our ingredients table?</p>\n<pre><code class=\"hljs language-sql\"><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>) <span class=\"hljs-keyword\">FROM</span> ingredients;\n</code></pre>\n<p><code>COUNT</code> is an aggregation function. We give the <code>*</code> is saying &quot;count everything and don&#39;t remove nulls or duplicates of any variety&quot;.</p>\n<p>What if we wanted to count how many distinct <code>type</code>s of ingredients we have in the ingredients table?</p>\n<pre><code class=\"hljs language-sql\"><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-keyword\">DISTINCT</span> type) <span class=\"hljs-keyword\">FROM</span> ingredients;\n</code></pre>\n<p>This is going to tell how many different <code>type</code>s we have in the ingredients table. Keep in mind the query to see <em>what</em> the distinct ingredients is</p>\n<pre><code class=\"hljs language-sql\"><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-keyword\">DISTINCT</span> type <span class=\"hljs-keyword\">FROM</span> ingredients;\n</code></pre>\n<p>The first query gives you the number, the count of many distinct things are in the list. The second query gives you what those distinct things are with no indication of how many of each there are. There could be 1 fruit and 10,000 vegetables and you&#39;d have no indication of that.</p>\n<p>Okay, so you want to see both at the same time? Let&#39;s see that.</p>\n<pre><code class=\"hljs language-sql\"><span class=\"hljs-keyword\">SELECT</span>\n  type, <span class=\"hljs-built_in\">COUNT</span>(type)\n<span class=\"hljs-keyword\">FROM</span>\n  ingredients\n<span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span>\n  type;\n</code></pre>\n<p>This is combining both of what we saw plus a new thing, <code>GROUP BY</code>. This allows us to specify what things we want to aggregate together: the type. Keep in mind if you want to SELECT for something with a GROUP BY clause, you do need to put them in the GROUP BY clause.</p>\n<blockquote>\n<p>The following query intentionally doesn&#39;t work</p>\n</blockquote>\n<pre><code class=\"hljs language-sql\"><span class=\"hljs-keyword\">SELECT</span>\n  title, type, <span class=\"hljs-built_in\">COUNT</span>(type)\n<span class=\"hljs-keyword\">FROM</span>\n  ingredients\n<span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span>\n  type;\n</code></pre>\n<p>This query doesn&#39;t work because title isn&#39;t in the GROUP BY clause. If you do add it, then you&#39;re saying &quot;group by unique title + type combinations&quot; which in this case everything is unique. I call this out because people don&#39;t realize in order to use SELECT and GROUP BY together, you have to put everything you want to SELECT in the GROUP BY.</p>\n","slug":"aggregation","title":"Aggregation","section":"Aggregation","icon":"square-plus","filePath":"/home/runner/work/complete-intro-to-sql/complete-intro-to-sql/lessons/06-aggregation/A-aggregation.md","nextSlug":"/lessons/aggregation/having","prevSlug":"/lessons/jsonb/when-to-use"}},"__N_SSG":true}