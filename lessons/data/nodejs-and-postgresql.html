<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/images/favicon.ico"/><title>Node.js and PostgreSQL ‚Äì Complete Intro to SQL</title><meta name="description" content="Come learn the basics to querying SQL and managing PostgreSQL with industry expert Brian Holt"/><meta name="og:description" content="Come learn the basics to querying SQL and managing PostgreSQL with industry expert Brian Holt"/><meta name="og:title" content="Node.js and PostgreSQL ‚Äì Complete Intro to SQL"/><meta name="og:image" content="/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/c0d0590379c832c9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c0d0590379c832c9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-fd82975a6094609f.js" defer=""></script><script src="/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/_next/static/chunks/main-d8b1ff545a609496.js" defer=""></script><script src="/_next/static/chunks/pages/_app-41c0821e3ebe9d40.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-e748a5e7fda443d2.js" defer=""></script><script src="/_next/static/L1nvFuMYgj19ON5bFBK-W/_buildManifest.js" defer=""></script><script src="/_next/static/L1nvFuMYgj19ON5bFBK-W/_ssgManifest.js" defer=""></script><script src="/_next/static/L1nvFuMYgj19ON5bFBK-W/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to SQL</a></h1><div class="navbar-info"><a href="https://holt.fyi/sql" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>This is not a Node.js class so the expectation of your Node.js skills here are fairly low. No worries if you don&#39;t have a ton of experience with Node.js</p>
<p>We are going to be using the <a href="https://node-postgres.com/">pg</a> package which is <a href="https://npmtrends.com/knex-vs-objection-vs-pg-vs-sequelize-vs-typeorm">the most common PostgreSQL client</a> for Node.js. There are others but this is the one with the most direct access to the underlying queries which is what we want. Feel free to use an ORM in your projects but it&#39;s useful to know how the underlying PostgreSQL works.</p>
<p>Before I dump you into the code I wanted to give you a very brief tour of what to expect.</p>
<h2 id="connecting-to-a-database">Connecting to a database</h2>
<p>pg has two ways to connect to a database: a client and a pool.</p>
<p>You can think of a client as an individual connection you open and then eventually close to your PostgreSQL database. When you call <code>connect</code> on a client, it handshakes with the server and opens a connection for you to start using. You eventually call <code>end</code> to end your session with a client.</p>
<p>A pool is a pool of clients. Opening and closing clients can be expensive if you&#39;re doing it a lot. Imagine you have a server that gets 1,000 requests per second and every one of those needs to open a line to a database. All that opening and closing of connections is a lot of overhead. A pool therefore holds onto connections. You basically just say &quot;hey pool, query this&quot; and if it has a spare connection open it will give it to you. If you don&#39;t then it will open another one. Pretty neat, right?</p>
<p>Okay, we&#39;re going to be using pools today since we&#39;re doing a web server. I&#39;d really only use a client for a one-off script or if I&#39;m doing transactions which aren&#39;t supported by pools (transactions are not covered in this course but it&#39;s if multiple queries <em>have</em> to happen all at once or not all). Otherwise I&#39;d stick to pools. One isn&#39;t any harder to use than the other.</p>
<p>So let&#39;s see how to connect to a database.</p>
<pre><code class="language-javascript">const pg = require(&quot;pg&quot;);
const pool = new pg.Pool({
  user: &quot;postgres&quot;,
  host: &quot;localhost&quot;,
  database: &quot;recipeguru&quot;,
  password: &quot;lol&quot;,
  port: 5432,
});
</code></pre>
<ul>
<li>These are the default credentials combined with what I set up in the previous lessons. Make sure you&#39;re using the correct credentials.</li>
<li>Make sure you started PostgreSQL via docker with the <code>-p 5432:5432</code> flag or PostgreSQL won&#39;t be exposed on your host system.</li>
<li>Make sure your database is running too.</li>
</ul>
<p>Once you&#39;ve done this, you can now start making queries to PostgreSQL!</p>
<p>Let&#39;s write a query.</p>
<pre><code class="language-javascript">const { rows } = await pool.query(`SELECT * FROM recipes`);
</code></pre>
<ul>
<li><code>rows</code> will be the response of the query.</li>
<li>There&#39;s lot of other metadata on these queries beyond just the rows. Feel free to <code>console.log</code> it or <code>debug</code> it to explore.</li>
<li>pg will add the <code>;</code> at the end for you.</li>
</ul>
<h2 id="parameterization-and-sql-injection">Parameterization and SQL injection</h2>
<p>Let&#39;s say you wanted to query for one specific ingredient by <code>id</code> and that id was passed in via an AJAX request.</p>
<pre><code class="language-sql">SELECT * FROM ingredients WHERE id = &lt;user input here&gt;;
</code></pre>
<p>What&#39;s wrong with then doing then:</p>
<pre><code class="language-javascript">const { id } = req.query;
const { rows } = await pool.query(`SELECT * FROM ingredients WHERE id=${id}`);
</code></pre>
<p>SQL injection. You&#39;re just raw passing in user data to a query and a user could fathomably put <em>anything</em> in that id API request. What happens if a user made id equal to <code>1; DROP TABLE users; --</code>?</p>
<blockquote>
<p>Do not run the next query. Well, it wouldn&#39;t matter since we don&#39;t have a users table but still, it&#39;s meant to be a demonstration of what could happen.</p>
</blockquote>
<pre><code class="language-sql">SELECT * FROM ingredients WHERE id=1; DROP TABLE users; --
</code></pre>
<p>Oh no üò±</p>
<p>The first <code>1;</code> ends the first query. The <code>DROP TABLE users;</code> does whatever malicious thing the hacker wants to do. They can delete info like this one does, or they can dump info that you don&#39;t want them to. The <code>--</code> says &quot;everything after this is a comment&quot; so it comments out the rest of your SQL if anything came after it.</p>
<p>This is SQL injection and a very real issue with SQL in apps. It&#39;s why Wordpress apps are always under attack because they use MySQL behind the scenes. If you can find somewhere you can inject SQL you can get a lot of info out of an app.</p>
<p>So how do we avoid it? Sanitization of your inputs and parameterization of your queries.</p>
<pre><code class="language-javascript">const { id } = req.query;

const { rows } = await pool.query(`SELECT * FROM ingredients WHERE id=$1`, [
  id,
]);
</code></pre>
<p>If you do this, pg will handle making sure that what goes into the query is safe to send to your database. Easy enough, right?</p>
<blockquote>
<p>If you need to do a a thing like <code>WHERE text ILIKE &#39;%star wars%&#39;</code> and you&#39;re using parameterized queryies, just put the <code>%</code> in the thing to be inserted, e.g. <code>(&#39;WHERE text ILIKE $1&#39;, [&#39;%star wars%&#39;])</code></p>
</blockquote>
</div><div class="lesson-links"><a href="/lessons/data/like-and-functions" class="prev">‚Üê Previous</a><a href="/lessons/data/project" class="next">Next ‚Üí</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="40" height="32" viewBox="0 0 40 32"><defs><clipPath id="clip-twitter-social"><rect width="40" height="32"></rect></clipPath></defs><g id="twitter-social" clip-path="url(#clip-twitter-social)"><g id="Group_269" data-name="Group 269" transform="translate(-230.23 -1140.849)"><path id="Path_419" data-name="Path 419" d="M266.12,1148.861v1.035a23.092,23.092,0,0,1-1.507,8.1,24.08,24.08,0,0,1-4.475,7.381,22.175,22.175,0,0,1-7.306,5.4,24.129,24.129,0,0,1-10,2.07,23.7,23.7,0,0,1-6.667-.945,22.83,22.83,0,0,1-5.936-2.655q.959.091,1.963.09a16.518,16.518,0,0,0,5.434-.9,17.111,17.111,0,0,0,4.749-2.52,8.275,8.275,0,0,1-4.749-1.643,7.8,7.8,0,0,1-2.877-3.983,8.268,8.268,0,0,0,1.507.135,8.58,8.58,0,0,0,2.146-.27,8.16,8.16,0,0,1-5.685-4.344,8.326,8.326,0,0,1-.89-3.578v-.135a7.775,7.775,0,0,0,3.744,1.035,8.183,8.183,0,0,1-2.671-2.9,7.817,7.817,0,0,1-.982-3.848,7.948,7.948,0,0,1,1.1-4.05,23.53,23.53,0,0,0,16.895,8.46,9.221,9.221,0,0,1-.183-1.845,7.787,7.787,0,0,1,1.1-4.05,8.216,8.216,0,0,1,2.991-2.948,7.991,7.991,0,0,1,4.087-1.1,8.184,8.184,0,0,1,5.982,2.566,16.087,16.087,0,0,0,5.205-1.98,7.784,7.784,0,0,1-1.393,2.588,8.4,8.4,0,0,1-2.215,1.913,16.856,16.856,0,0,0,4.749-1.305A17.032,17.032,0,0,1,266.12,1148.861Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Excercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <!-- --><a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"title":"Node.js and PostgreSQL"},"html":"\u003cp\u003eThis is not a Node.js class so the expectation of your Node.js skills here are fairly low. No worries if you don\u0026#39;t have a ton of experience with Node.js\u003c/p\u003e\n\u003cp\u003eWe are going to be using the \u003ca href=\"https://node-postgres.com/\"\u003epg\u003c/a\u003e package which is \u003ca href=\"https://npmtrends.com/knex-vs-objection-vs-pg-vs-sequelize-vs-typeorm\"\u003ethe most common PostgreSQL client\u003c/a\u003e for Node.js. There are others but this is the one with the most direct access to the underlying queries which is what we want. Feel free to use an ORM in your projects but it\u0026#39;s useful to know how the underlying PostgreSQL works.\u003c/p\u003e\n\u003cp\u003eBefore I dump you into the code I wanted to give you a very brief tour of what to expect.\u003c/p\u003e\n\u003ch2 id=\"connecting-to-a-database\"\u003eConnecting to a database\u003c/h2\u003e\n\u003cp\u003epg has two ways to connect to a database: a client and a pool.\u003c/p\u003e\n\u003cp\u003eYou can think of a client as an individual connection you open and then eventually close to your PostgreSQL database. When you call \u003ccode\u003econnect\u003c/code\u003e on a client, it handshakes with the server and opens a connection for you to start using. You eventually call \u003ccode\u003eend\u003c/code\u003e to end your session with a client.\u003c/p\u003e\n\u003cp\u003eA pool is a pool of clients. Opening and closing clients can be expensive if you\u0026#39;re doing it a lot. Imagine you have a server that gets 1,000 requests per second and every one of those needs to open a line to a database. All that opening and closing of connections is a lot of overhead. A pool therefore holds onto connections. You basically just say \u0026quot;hey pool, query this\u0026quot; and if it has a spare connection open it will give it to you. If you don\u0026#39;t then it will open another one. Pretty neat, right?\u003c/p\u003e\n\u003cp\u003eOkay, we\u0026#39;re going to be using pools today since we\u0026#39;re doing a web server. I\u0026#39;d really only use a client for a one-off script or if I\u0026#39;m doing transactions which aren\u0026#39;t supported by pools (transactions are not covered in this course but it\u0026#39;s if multiple queries \u003cem\u003ehave\u003c/em\u003e to happen all at once or not all). Otherwise I\u0026#39;d stick to pools. One isn\u0026#39;t any harder to use than the other.\u003c/p\u003e\n\u003cp\u003eSo let\u0026#39;s see how to connect to a database.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst pg = require(\u0026quot;pg\u0026quot;);\nconst pool = new pg.Pool({\n  user: \u0026quot;postgres\u0026quot;,\n  host: \u0026quot;localhost\u0026quot;,\n  database: \u0026quot;recipeguru\u0026quot;,\n  password: \u0026quot;lol\u0026quot;,\n  port: 5432,\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eThese are the default credentials combined with what I set up in the previous lessons. Make sure you\u0026#39;re using the correct credentials.\u003c/li\u003e\n\u003cli\u003eMake sure you started PostgreSQL via docker with the \u003ccode\u003e-p 5432:5432\u003c/code\u003e flag or PostgreSQL won\u0026#39;t be exposed on your host system.\u003c/li\u003e\n\u003cli\u003eMake sure your database is running too.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eOnce you\u0026#39;ve done this, you can now start making queries to PostgreSQL!\u003c/p\u003e\n\u003cp\u003eLet\u0026#39;s write a query.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst { rows } = await pool.query(`SELECT * FROM recipes`);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003erows\u003c/code\u003e will be the response of the query.\u003c/li\u003e\n\u003cli\u003eThere\u0026#39;s lot of other metadata on these queries beyond just the rows. Feel free to \u003ccode\u003econsole.log\u003c/code\u003e it or \u003ccode\u003edebug\u003c/code\u003e it to explore.\u003c/li\u003e\n\u003cli\u003epg will add the \u003ccode\u003e;\u003c/code\u003e at the end for you.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"parameterization-and-sql-injection\"\u003eParameterization and SQL injection\u003c/h2\u003e\n\u003cp\u003eLet\u0026#39;s say you wanted to query for one specific ingredient by \u003ccode\u003eid\u003c/code\u003e and that id was passed in via an AJAX request.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eSELECT * FROM ingredients WHERE id = \u0026lt;user input here\u0026gt;;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhat\u0026#39;s wrong with then doing then:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst { id } = req.query;\nconst { rows } = await pool.query(`SELECT * FROM ingredients WHERE id=${id}`);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSQL injection. You\u0026#39;re just raw passing in user data to a query and a user could fathomably put \u003cem\u003eanything\u003c/em\u003e in that id API request. What happens if a user made id equal to \u003ccode\u003e1; DROP TABLE users; --\u003c/code\u003e?\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eDo not run the next query. Well, it wouldn\u0026#39;t matter since we don\u0026#39;t have a users table but still, it\u0026#39;s meant to be a demonstration of what could happen.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eSELECT * FROM ingredients WHERE id=1; DROP TABLE users; --\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOh no üò±\u003c/p\u003e\n\u003cp\u003eThe first \u003ccode\u003e1;\u003c/code\u003e ends the first query. The \u003ccode\u003eDROP TABLE users;\u003c/code\u003e does whatever malicious thing the hacker wants to do. They can delete info like this one does, or they can dump info that you don\u0026#39;t want them to. The \u003ccode\u003e--\u003c/code\u003e says \u0026quot;everything after this is a comment\u0026quot; so it comments out the rest of your SQL if anything came after it.\u003c/p\u003e\n\u003cp\u003eThis is SQL injection and a very real issue with SQL in apps. It\u0026#39;s why Wordpress apps are always under attack because they use MySQL behind the scenes. If you can find somewhere you can inject SQL you can get a lot of info out of an app.\u003c/p\u003e\n\u003cp\u003eSo how do we avoid it? Sanitization of your inputs and parameterization of your queries.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst { id } = req.query;\n\nconst { rows } = await pool.query(`SELECT * FROM ingredients WHERE id=$1`, [\n  id,\n]);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf you do this, pg will handle making sure that what goes into the query is safe to send to your database. Easy enough, right?\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf you need to do a a thing like \u003ccode\u003eWHERE text ILIKE \u0026#39;%star wars%\u0026#39;\u003c/code\u003e and you\u0026#39;re using parameterized queryies, just put the \u003ccode\u003e%\u003c/code\u003e in the thing to be inserted, e.g. \u003ccode\u003e(\u0026#39;WHERE text ILIKE $1\u0026#39;, [\u0026#39;%star wars%\u0026#39;])\u003c/code\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n","slug":"nodejs-and-postgresql","title":"Node.js and PostgreSQL","section":"Data","icon":"table","filePath":"/home/runner/work/complete-intro-to-sql/complete-intro-to-sql/lessons/03-data/E-nodejs-and-postgresql.md","nextSlug":"/lessons/data/project","prevSlug":"/lessons/data/like-and-functions"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"data","slug":"nodejs-and-postgresql"},"buildId":"L1nvFuMYgj19ON5bFBK-W","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>