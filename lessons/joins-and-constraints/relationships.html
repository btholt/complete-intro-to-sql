<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/images/favicon.ico"/><title>Relationships – Complete Intro to SQL</title><meta name="description" content="Come learn the basics to querying SQL and managing PostgreSQL with industry expert Brian Holt"/><meta name="og:description" content="Come learn the basics to querying SQL and managing PostgreSQL with industry expert Brian Holt"/><meta name="og:title" content="Relationships – Complete Intro to SQL"/><meta name="og:image" content="/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/c0d0590379c832c9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c0d0590379c832c9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-fd82975a6094609f.js" defer=""></script><script src="/_next/static/chunks/framework-a87821de553db91d.js" defer=""></script><script src="/_next/static/chunks/main-d8b1ff545a609496.js" defer=""></script><script src="/_next/static/chunks/pages/_app-41c0821e3ebe9d40.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-e748a5e7fda443d2.js" defer=""></script><script src="/_next/static/L1nvFuMYgj19ON5bFBK-W/_buildManifest.js" defer=""></script><script src="/_next/static/L1nvFuMYgj19ON5bFBK-W/_ssgManifest.js" defer=""></script><script src="/_next/static/L1nvFuMYgj19ON5bFBK-W/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to SQL</a></h1><div class="navbar-info"><a href="https://holt.fyi/sql" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>So far we&#39;ve done a one to one matching of records. We&#39;ve used a record in a database to represent one item: a vegetable, a fruit, so on and so forth.</p>
<p>Now we&#39;re going to get into records that can relate to each other. Let&#39;s think about recipes. A recipe has multiple ingredients. That <strong>has</strong> word is key here. It means there is a relationship. A single recipe has many ingredients. An ingredient can also be in many recipes. A tomato is both in pizza sauce and in a BLT. This is called a many-to-many relationship.</p>
<p>There&#39;s also one-to-many relationships, like imagine if we had multiple photos of each of our ingredients. A single ingredient will have five photos. And those photos will only will only belong to one ingredient. A photo of a green pepper doesn&#39;t make sense to belong to anything besides the green pepper ingredient.</p>
<p>There can also exist one-to-one relationships but in general you would just make those the same record all together. You could split up the type and title into two tables, but why would you.</p>
<h2 id="a-basic-relationship">A basic relationship</h2>
<p>We&#39;re going to do this a naïve wrong way, and then we&#39;re going to do it the correct way.</p>
<p>First thing we&#39;re going to make a recipes table</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> recipes (
  recipe_id <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">PRIMARY</span> KEY GENERATED ALWAYS <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,
  title <span class="hljs-type">VARCHAR</span> ( <span class="hljs-number">255</span> ) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  body TEXT
);
</code></pre>
<p>Okay, no rocket science so far. We just created another random table. Let&#39;s say we could have many images of a single recipe. How would we go about doing that?</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> recipes
  (title, body)
<span class="hljs-keyword">VALUES</span>
  (<span class="hljs-string">&#x27;cookies&#x27;</span>, <span class="hljs-string">&#x27;very yummy&#x27;</span>),
  (<span class="hljs-string">&#x27;empanada&#x27;</span>,<span class="hljs-string">&#x27;ugh so good&#x27;</span>),
  (<span class="hljs-string">&#x27;jollof rice&#x27;</span>, <span class="hljs-string">&#x27;spectacular&#x27;</span>),
  (<span class="hljs-string">&#x27;shakshuka&#x27;</span>,<span class="hljs-string">&#x27;absolutely wonderful&#x27;</span>),
  (<span class="hljs-string">&#x27;khachapuri&#x27;</span>, <span class="hljs-string">&#x27;breakfast perfection&#x27;</span>),
  (<span class="hljs-string">&#x27;xiao long bao&#x27;</span>, <span class="hljs-string">&#x27;god I want some dumplings right now&#x27;</span>);
</code></pre>
<blockquote>
<p>Pro tip: don&#39;t write a course while hungry.</p>
</blockquote>
<p>Okay, we now have a bunch of recipes. Our problem now is that we have a variable amount of photos for each recipe. Perhaps we have one picture of cookies but we have four pictures of jollof rice. How do we model that if we always have a fixed amount columns?</p>
<p>One approach would be to say &quot;I only have at most five pictures of any recipes, I&#39;ll make columns pic1 through pic5 columns and limit myself to that&quot;. Totally valid approach, and if you can guarantee only 5 images at most, it might be the right approach.</p>
<p>But what if we can&#39;t guarantee that? We need some sort of flexibility. This is where we can use two tables.</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> recipes_photos (
  photo_id <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">PRIMARY</span> KEY GENERATED ALWAYS <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,
  recipe_id <span class="hljs-type">INTEGER</span>,
  url <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>
);
</code></pre>
<p>Now we can insert a some rows to reference images that we have.</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> recipes_photos
  (recipe_id, url)
<span class="hljs-keyword">VALUES</span>
  (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;cookies1.jpg&#x27;</span>),
  (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;cookies2.jpg&#x27;</span>),
  (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;cookies3.jpg&#x27;</span>),
  (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;cookies4.jpg&#x27;</span>),
  (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;cookies5.jpg&#x27;</span>),
  (<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;empanada1.jpg&#x27;</span>),
  (<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;empanada2.jpg&#x27;</span>),
  (<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;jollof1.jpg&#x27;</span>),
  (<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;shakshuka1.jpg&#x27;</span>),
  (<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;shakshuka2.jpg&#x27;</span>),
  (<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;shakshuka3.jpg&#x27;</span>),
  (<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;khachapuri1.jpg&#x27;</span>),
  (<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;khachapuri2.jpg&#x27;</span>);
<span class="hljs-comment">-- no pictures of xiao long bao</span>
</code></pre>
<p>Okay, now let&#39;s select all the photos for shakshuka. Shakshuka is ID 4 (if you followed my instructions, feel free to drop tables and recreate them if you need to.)</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> title, body <span class="hljs-keyword">FROM</span> recipes <span class="hljs-keyword">WHERE</span> recipe_id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;
<span class="hljs-keyword">SELECT</span> url <span class="hljs-keyword">FROM</span> recipes_photos <span class="hljs-keyword">WHERE</span> recipe_id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;
</code></pre>
<p>It&#39;d be cool if we could do these all at the same time. Some sort inner section of a venn diagram, right? You can!</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> recipes.title, recipes.body, recipes_photos.url
  <span class="hljs-keyword">FROM</span> recipes_photos
  <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
    recipes
  <span class="hljs-keyword">ON</span>
    recipes_photos.recipe_id <span class="hljs-operator">=</span> recipes.recipe_id
  <span class="hljs-keyword">WHERE</span> recipes_photos.recipe_id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;
</code></pre>
<p>Amazing!!</p>
<p>Now we&#39;re getting data from each table smushed together. The data from recipes will be repeated over item in the recipes_photos table but that&#39;s what we expect.</p>
<p>Just to show you some common shorthand (but otherwise same query)</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> r.title, r.body, rp.url
  <span class="hljs-keyword">FROM</span> recipes_photos rp
  <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
    recipes r
  <span class="hljs-keyword">ON</span>
    rp.recipe_id <span class="hljs-operator">=</span> r.recipe_id
  <span class="hljs-keyword">WHERE</span> rp.recipe_id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;
</code></pre>
<p>Go ahead and try this to see the full inner join.</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> r.title, r.body, rp.url
  <span class="hljs-keyword">FROM</span> recipes_photos rp
  <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span>
    recipes r
  <span class="hljs-keyword">ON</span>
    rp.recipe_id <span class="hljs-operator">=</span> r.recipe_id;
</code></pre>
<p>Pretty cool, right?</p>
</div><div class="lesson-links"><a href="/lessons/data/project" class="prev">← Previous</a><a href="/lessons/joins-and-constraints/other-types-of-joins" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="40" height="32" viewBox="0 0 40 32"><defs><clipPath id="clip-twitter-social"><rect width="40" height="32"></rect></clipPath></defs><g id="twitter-social" clip-path="url(#clip-twitter-social)"><g id="Group_269" data-name="Group 269" transform="translate(-230.23 -1140.849)"><path id="Path_419" data-name="Path 419" d="M266.12,1148.861v1.035a23.092,23.092,0,0,1-1.507,8.1,24.08,24.08,0,0,1-4.475,7.381,22.175,22.175,0,0,1-7.306,5.4,24.129,24.129,0,0,1-10,2.07,23.7,23.7,0,0,1-6.667-.945,22.83,22.83,0,0,1-5.936-2.655q.959.091,1.963.09a16.518,16.518,0,0,0,5.434-.9,17.111,17.111,0,0,0,4.749-2.52,8.275,8.275,0,0,1-4.749-1.643,7.8,7.8,0,0,1-2.877-3.983,8.268,8.268,0,0,0,1.507.135,8.58,8.58,0,0,0,2.146-.27,8.16,8.16,0,0,1-5.685-4.344,8.326,8.326,0,0,1-.89-3.578v-.135a7.775,7.775,0,0,0,3.744,1.035,8.183,8.183,0,0,1-2.671-2.9,7.817,7.817,0,0,1-.982-3.848,7.948,7.948,0,0,1,1.1-4.05,23.53,23.53,0,0,0,16.895,8.46,9.221,9.221,0,0,1-.183-1.845,7.787,7.787,0,0,1,1.1-4.05,8.216,8.216,0,0,1,2.991-2.948,7.991,7.991,0,0,1,4.087-1.1,8.184,8.184,0,0,1,5.982,2.566,16.087,16.087,0,0,0,5.205-1.98,7.784,7.784,0,0,1-1.393,2.588,8.4,8.4,0,0,1-2.215,1.913,16.856,16.856,0,0,0,4.749-1.305A17.032,17.032,0,0,1,266.12,1148.861Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Excercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <!-- --><a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"description":""},"html":"\u003cp\u003eSo far we\u0026#39;ve done a one to one matching of records. We\u0026#39;ve used a record in a database to represent one item: a vegetable, a fruit, so on and so forth.\u003c/p\u003e\n\u003cp\u003eNow we\u0026#39;re going to get into records that can relate to each other. Let\u0026#39;s think about recipes. A recipe has multiple ingredients. That \u003cstrong\u003ehas\u003c/strong\u003e word is key here. It means there is a relationship. A single recipe has many ingredients. An ingredient can also be in many recipes. A tomato is both in pizza sauce and in a BLT. This is called a many-to-many relationship.\u003c/p\u003e\n\u003cp\u003eThere\u0026#39;s also one-to-many relationships, like imagine if we had multiple photos of each of our ingredients. A single ingredient will have five photos. And those photos will only will only belong to one ingredient. A photo of a green pepper doesn\u0026#39;t make sense to belong to anything besides the green pepper ingredient.\u003c/p\u003e\n\u003cp\u003eThere can also exist one-to-one relationships but in general you would just make those the same record all together. You could split up the type and title into two tables, but why would you.\u003c/p\u003e\n\u003ch2 id=\"a-basic-relationship\"\u003eA basic relationship\u003c/h2\u003e\n\u003cp\u003eWe\u0026#39;re going to do this a naïve wrong way, and then we\u0026#39;re going to do it the correct way.\u003c/p\u003e\n\u003cp\u003eFirst thing we\u0026#39;re going to make a recipes table\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTABLE\u003c/span\u003e recipes (\n  recipe_id \u003cspan class=\"hljs-type\"\u003eINTEGER\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ePRIMARY\u003c/span\u003e KEY GENERATED ALWAYS \u003cspan class=\"hljs-keyword\"\u003eAS\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eIDENTITY\u003c/span\u003e,\n  title \u003cspan class=\"hljs-type\"\u003eVARCHAR\u003c/span\u003e ( \u003cspan class=\"hljs-number\"\u003e255\u003c/span\u003e ) \u003cspan class=\"hljs-keyword\"\u003eUNIQUE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eNOT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eNULL\u003c/span\u003e,\n  body TEXT\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOkay, no rocket science so far. We just created another random table. Let\u0026#39;s say we could have many images of a single recipe. How would we go about doing that?\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eINTO\u003c/span\u003e recipes\n  (title, body)\n\u003cspan class=\"hljs-keyword\"\u003eVALUES\u003c/span\u003e\n  (\u003cspan class=\"hljs-string\"\u003e\u0026#x27;cookies\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;very yummy\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-string\"\u003e\u0026#x27;empanada\u0026#x27;\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\u0026#x27;ugh so good\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-string\"\u003e\u0026#x27;jollof rice\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;spectacular\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-string\"\u003e\u0026#x27;shakshuka\u0026#x27;\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\u0026#x27;absolutely wonderful\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-string\"\u003e\u0026#x27;khachapuri\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;breakfast perfection\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-string\"\u003e\u0026#x27;xiao long bao\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;god I want some dumplings right now\u0026#x27;\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cblockquote\u003e\n\u003cp\u003ePro tip: don\u0026#39;t write a course while hungry.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eOkay, we now have a bunch of recipes. Our problem now is that we have a variable amount of photos for each recipe. Perhaps we have one picture of cookies but we have four pictures of jollof rice. How do we model that if we always have a fixed amount columns?\u003c/p\u003e\n\u003cp\u003eOne approach would be to say \u0026quot;I only have at most five pictures of any recipes, I\u0026#39;ll make columns pic1 through pic5 columns and limit myself to that\u0026quot;. Totally valid approach, and if you can guarantee only 5 images at most, it might be the right approach.\u003c/p\u003e\n\u003cp\u003eBut what if we can\u0026#39;t guarantee that? We need some sort of flexibility. This is where we can use two tables.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTABLE\u003c/span\u003e recipes_photos (\n  photo_id \u003cspan class=\"hljs-type\"\u003eINTEGER\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ePRIMARY\u003c/span\u003e KEY GENERATED ALWAYS \u003cspan class=\"hljs-keyword\"\u003eAS\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eIDENTITY\u003c/span\u003e,\n  recipe_id \u003cspan class=\"hljs-type\"\u003eINTEGER\u003c/span\u003e,\n  url \u003cspan class=\"hljs-type\"\u003eVARCHAR\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e255\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eNOT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eNULL\u003c/span\u003e\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow we can insert a some rows to reference images that we have.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eINTO\u003c/span\u003e recipes_photos\n  (recipe_id, url)\n\u003cspan class=\"hljs-keyword\"\u003eVALUES\u003c/span\u003e\n  (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;cookies1.jpg\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;cookies2.jpg\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;cookies3.jpg\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;cookies4.jpg\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;cookies5.jpg\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;empanada1.jpg\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;empanada2.jpg\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;jollof1.jpg\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;shakshuka1.jpg\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;shakshuka2.jpg\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;shakshuka3.jpg\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;khachapuri1.jpg\u0026#x27;\u003c/span\u003e),\n  (\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;khachapuri2.jpg\u0026#x27;\u003c/span\u003e);\n\u003cspan class=\"hljs-comment\"\u003e-- no pictures of xiao long bao\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOkay, now let\u0026#39;s select all the photos for shakshuka. Shakshuka is ID 4 (if you followed my instructions, feel free to drop tables and recreate them if you need to.)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e title, body \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e recipes \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e recipe_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e url \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e recipes_photos \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e recipe_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt\u0026#39;d be cool if we could do these all at the same time. Some sort inner section of a venn diagram, right? You can!\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e recipes.title, recipes.body, recipes_photos.url\n  \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e recipes_photos\n  \u003cspan class=\"hljs-keyword\"\u003eINNER\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eJOIN\u003c/span\u003e\n    recipes\n  \u003cspan class=\"hljs-keyword\"\u003eON\u003c/span\u003e\n    recipes_photos.recipe_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e recipes.recipe_id\n  \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e recipes_photos.recipe_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAmazing!!\u003c/p\u003e\n\u003cp\u003eNow we\u0026#39;re getting data from each table smushed together. The data from recipes will be repeated over item in the recipes_photos table but that\u0026#39;s what we expect.\u003c/p\u003e\n\u003cp\u003eJust to show you some common shorthand (but otherwise same query)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e r.title, r.body, rp.url\n  \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e recipes_photos rp\n  \u003cspan class=\"hljs-keyword\"\u003eINNER\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eJOIN\u003c/span\u003e\n    recipes r\n  \u003cspan class=\"hljs-keyword\"\u003eON\u003c/span\u003e\n    rp.recipe_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e r.recipe_id\n  \u003cspan class=\"hljs-keyword\"\u003eWHERE\u003c/span\u003e rp.recipe_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eGo ahead and try this to see the full inner join.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e r.title, r.body, rp.url\n  \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e recipes_photos rp\n  \u003cspan class=\"hljs-keyword\"\u003eINNER\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eJOIN\u003c/span\u003e\n    recipes r\n  \u003cspan class=\"hljs-keyword\"\u003eON\u003c/span\u003e\n    rp.recipe_id \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e r.recipe_id;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ePretty cool, right?\u003c/p\u003e\n","slug":"relationships","title":"Relationships","section":"Joins and Constraints","icon":"code-merge","filePath":"/home/runner/work/complete-intro-to-sql/complete-intro-to-sql/lessons/04-joins-and-constraints/A-relationships.md","nextSlug":"/lessons/joins-and-constraints/other-types-of-joins","prevSlug":"/lessons/data/project"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"joins-and-constraints","slug":"relationships"},"buildId":"L1nvFuMYgj19ON5bFBK-W","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>